/** 
 * @file Core1.c
 * @generated by CPrinter
 * @date Wed Jun 11 14:20:57 CEST 2014
 */

#include "../include/x86.h"

// Core Global Declaration
extern pthread_barrier_t iter_barrier;
extern int stopThreads;
extern char *const o1__i1__2;  // Sensor_o1 > Gen_int_i1 size:= 100*char defined in Core0
extern char *const o2__i2__0;  // Sensor_o2 > Gen_int_i2 size:= 100*char defined in Core0
extern char *const o3__i2__0;  // Sensor_o3 > X2InputParallelTest_i2 size:= 100*char defined in Core0
extern char *const Sensor__X2InputParallelTest__0;  // Sensor > X2InputParallelTest size:= 100*char defined in Core0
extern char *const o1__i1__1;  // Gen_int_o1 > Copy_i1 size:= 100*char defined in Core0
extern char *const o2__i2__1;  // Gen_int_o2 > Actuator_i2 size:= 100*char defined in Core0
extern char *const Gen_int__Actuator__0;  // Gen_int > Actuator size:= 100*char defined in Core0
extern char *const o1__i1__0;  // Copy_o1 > Actuator_i1 size:= 100*char defined in Core0
extern char *const Copy__Actuator__0;  // Copy > Actuator size:= 100*char defined in Core0

// Core Global Definitions
sem_t sem_0_SSRE;
sem_t sem_1_SSRE;
sem_t sem_2_SSRE;

void *computationThread_Core1(void *arg){
	// Initialisation(s)
	sem_init(&sem_0_SSRE,0,0/*init_val*/); // Sensor > X2InputParallelTest
	sem_init(&sem_1_SSRE,0,0/*init_val*/); // Gen_int > Actuator
	sem_init(&sem_2_SSRE,0,0/*init_val*/); // Copy > Actuator

	// Begin the execution loop 
	while(1){
		pthread_barrier_wait(&iter_barrier);
		if(stopThreads){
			pthread_exit(NULL);
		}
		sensor(o1__i1__2,o2__i2__0,o3__i2__0); // Sensor
		sendStart(&sem_0_SSRE/*ID*/); // Core1 > Core0: Sensor__X2InputParallelTest__0 
		sendEnd(); // Core1 > Core0: Sensor__X2InputParallelTest__0 
		gen_int(o1__i1__2,o2__i2__0,o1__i1__1,o2__i2__1); // Gen_int
		sendStart(&sem_1_SSRE/*ID*/); // Core1 > Core0: Gen_int__Actuator__0 
		sendEnd(); // Core1 > Core0: Gen_int__Actuator__0 
		copy(o1__i1__1,o1__i1__0); // Copy
		sendStart(&sem_2_SSRE/*ID*/); // Core1 > Core0: Copy__Actuator__0 
		sendEnd(); // Core1 > Core0: Copy__Actuator__0 
	}
}
